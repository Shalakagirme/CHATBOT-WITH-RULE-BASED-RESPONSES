!function(){"use strict";function t(t,e){return t===e||t!=t&&e!=e}function e(e,n){for(var o=e.length;o--;)if(t(e[o][0],n))return o;return-1}var n=Array.prototype.splice;function o(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}o.prototype.clear=function(){this.__data__=[],this.size=0},o.prototype.delete=function(t){var o=this.__data__,r=e(o,t);return!(r<0)&&(r==o.length-1?o.pop():n.call(o,r,1),--this.size,!0)},o.prototype.get=function(t){var n=this.__data__,o=e(n,t);return o<0?void 0:n[o][1]},o.prototype.has=function(t){return e(this.__data__,t)>-1},o.prototype.set=function(t,n){var o=this.__data__,r=e(o,t);return r<0?(++this.size,o.push([t,n])):o[r][1]=n,this};var r="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")(),s=a.Symbol,E=Object.prototype,_=E.hasOwnProperty,c=E.toString,u=s?s.toStringTag:void 0;var T=Object.prototype.toString;var O="[object Null]",l="[object Undefined]",R=s?s.toStringTag:void 0;function d(t){return null==t?void 0===t?l:O:R&&R in Object(t)?function(t){var e=_.call(t,u),n=t[u];try{t[u]=void 0;var o=!0}catch(t){}var r=c.call(t);return o&&(e?t[u]=n:delete t[u]),r}(t):function(t){return T.call(t)}(t)}function N(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var I="[object AsyncFunction]",S="[object Function]",A="[object GeneratorFunction]",p="[object Proxy]";function f(t){if(!N(t))return!1;var e=d(t);return e==S||e==A||e==I||e==p}var C,h=a["__core-js_shared__"],D=(C=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";var g=Function.prototype.toString;var L=/^\[object .+?Constructor\]$/,w=Function.prototype,U=Object.prototype,m=w.toString,y=U.hasOwnProperty,v=RegExp("^"+m.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function P(t){return!(!N(t)||(e=t,D&&D in e))&&(f(t)?v:L).test(function(t){if(null!=t){try{return g.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function b(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return P(n)?n:void 0}var M=b(a,"Map"),G=b(Object,"create");var W=Object.prototype.hasOwnProperty;var H=Object.prototype.hasOwnProperty;function F(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function j(t,e){var n,o,r=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function B(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}F.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},F.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},F.prototype.get=function(t){var e=this.__data__;if(G){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return W.call(e,t)?e[t]:void 0},F.prototype.has=function(t){var e=this.__data__;return G?void 0!==e[t]:H.call(e,t)},F.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=G&&void 0===e?"__lodash_hash_undefined__":e,this},B.prototype.clear=function(){this.size=0,this.__data__={hash:new F,map:new(M||o),string:new F}},B.prototype.delete=function(t){var e=j(this,t).delete(t);return this.size-=e?1:0,e},B.prototype.get=function(t){return j(this,t).get(t)},B.prototype.has=function(t){return j(this,t).has(t)},B.prototype.set=function(t,e){var n=j(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};function Y(t){var e=this.__data__=new o(t);this.size=e.size}Y.prototype.clear=function(){this.__data__=new o,this.size=0},Y.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Y.prototype.get=function(t){return this.__data__.get(t)},Y.prototype.has=function(t){return this.__data__.has(t)},Y.prototype.set=function(t,e){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!M||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new B(r)}return n.set(t,e),this.size=n.size,this};var x=function(){try{var t=b(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function V(t,e,n){"__proto__"==e&&x?x(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function k(e,n,o){(void 0!==o&&!t(e[n],o)||void 0===o&&!(n in e))&&V(e,n,o)}var $=function(t,e,n){for(var o=-1,r=Object(t),i=n(t),a=i.length;a--;){var s=i[++o];if(!1===e(r[s],s,r))break}return t},K="object"==typeof exports&&exports&&!exports.nodeType&&exports,Q=K&&"object"==typeof module&&module&&!module.nodeType&&module,z=Q&&Q.exports===K?a.Buffer:void 0;z&&z.allocUnsafe;var X=a.Uint8Array;function Z(t,e){var n,o,r=(n=t.buffer,o=new n.constructor(n.byteLength),new X(o).set(new X(n)),o);return new t.constructor(r,t.byteOffset,t.length)}var q=Object.create,J=function(){function t(){}return function(e){if(!N(e))return{};if(q)return q(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var tt,et,nt=(tt=Object.getPrototypeOf,et=Object,function(t){return tt(et(t))}),ot=Object.prototype;function rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ot)}function it(t){return null!=t&&"object"==typeof t}function at(t){return it(t)&&"[object Arguments]"==d(t)}var st=Object.prototype,Et=st.hasOwnProperty,_t=st.propertyIsEnumerable,ct=at(function(){return arguments}())?at:function(t){return it(t)&&Et.call(t,"callee")&&!_t.call(t,"callee")},ut=Array.isArray,Tt=9007199254740991;function Ot(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Tt}function lt(t){return null!=t&&Ot(t.length)&&!f(t)}var Rt="object"==typeof exports&&exports&&!exports.nodeType&&exports,dt=Rt&&"object"==typeof module&&module&&!module.nodeType&&module,Nt=dt&&dt.exports===Rt?a.Buffer:void 0,It=(Nt?Nt.isBuffer:void 0)||function(){return!1},St="[object Object]",At=Function.prototype,pt=Object.prototype,ft=At.toString,Ct=pt.hasOwnProperty,ht=ft.call(Object);var Dt={};Dt["[object Float32Array]"]=Dt["[object Float64Array]"]=Dt["[object Int8Array]"]=Dt["[object Int16Array]"]=Dt["[object Int32Array]"]=Dt["[object Uint8Array]"]=Dt["[object Uint8ClampedArray]"]=Dt["[object Uint16Array]"]=Dt["[object Uint32Array]"]=!0,Dt["[object Arguments]"]=Dt["[object Array]"]=Dt["[object ArrayBuffer]"]=Dt["[object Boolean]"]=Dt["[object DataView]"]=Dt["[object Date]"]=Dt["[object Error]"]=Dt["[object Function]"]=Dt["[object Map]"]=Dt["[object Number]"]=Dt["[object Object]"]=Dt["[object RegExp]"]=Dt["[object Set]"]=Dt["[object String]"]=Dt["[object WeakMap]"]=!1;var gt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Lt=gt&&"object"==typeof module&&module&&!module.nodeType&&module,wt=Lt&&Lt.exports===gt&&r.process,Ut=function(){try{var t=Lt&&Lt.require&&Lt.require("util").types;return t||wt&&wt.binding&&wt.binding("util")}catch(t){}}(),mt=Ut&&Ut.isTypedArray,yt=mt?function(t){return function(e){return t(e)}}(mt):function(t){return it(t)&&Ot(t.length)&&!!Dt[d(t)]};function vt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Pt=Object.prototype.hasOwnProperty;function bt(e,n,o){var r=e[n];Pt.call(e,n)&&t(r,o)&&(void 0!==o||n in e)||V(e,n,o)}var Mt=9007199254740991,Gt=/^(?:0|[1-9]\d*)$/;function Wt(t,e){var n=typeof t;return!!(e=null==e?Mt:e)&&("number"==n||"symbol"!=n&&Gt.test(t))&&t>-1&&t%1==0&&t<e}function Ht(t,e){var n=ut(t),o=!n&&ct(t),r=!n&&!o&&It(t),i=!n&&!o&&!r&&yt(t),a=n||o||r||i,s=a?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],E=s.length;for(var _ in t)a&&("length"==_||r&&("offset"==_||"parent"==_)||i&&("buffer"==_||"byteLength"==_||"byteOffset"==_)||Wt(_,E))||s.push(_);return s}var Ft=Object.prototype.hasOwnProperty;function jt(t){if(!N(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=rt(t),n=[];for(var o in t)("constructor"!=o||!e&&Ft.call(t,o))&&n.push(o);return n}function Bt(t){return lt(t)?Ht(t):jt(t)}function Yt(t){return function(t,e,n,o){var r=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var s=e[i],E=void 0;void 0===E&&(E=t[s]),r?V(n,s,E):bt(n,s,E)}return n}(t,Bt(t))}function xt(t,e,n,o,r,i,a){var s=vt(t,n),E=vt(e,n),_=a.get(E);if(_)k(t,n,_);else{var c,u=i?i(s,E,n+"",t,e,a):void 0,T=void 0===u;if(T){var O=ut(E),l=!O&&It(E),R=!O&&!l&&yt(E);u=E,O||l||R?ut(s)?u=s:it(c=s)&&lt(c)?u=function(t,e){var n=-1,o=t.length;for(e||(e=Array(o));++n<o;)e[n]=t[n];return e}(s):l?(T=!1,u=E.slice()):R?(T=!1,u=Z(E)):u=[]:function(t){if(!it(t)||d(t)!=St)return!1;var e=nt(t);if(null===e)return!0;var n=Ct.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ft.call(n)==ht}(E)||ct(E)?(u=s,ct(s)?u=Yt(s):N(s)&&!f(s)||(u=function(t){return"function"!=typeof t.constructor||rt(t)?{}:J(nt(t))}(E))):T=!1}T&&(a.set(E,u),r(u,E,o,i,a),a.delete(E)),k(t,n,u)}}function Vt(t,e,n,o,r){t!==e&&$(e,(function(i,a){if(r||(r=new Y),N(i))xt(t,e,a,n,Vt,o,r);else{var s=o?o(vt(t,a),i,a+"",t,e,r):void 0;void 0===s&&(s=i),k(t,a,s)}}),Bt)}function kt(t){return t}var $t=Math.max;var Kt=x?function(t,e){return x(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:kt,Qt=Date.now;var zt=function(t){var e=0,n=0;return function(){var o=Qt(),r=16-(o-n);if(n=o,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Kt);function Xt(t,e){return zt(function(t,e,n){return e=$t(void 0===e?t.length-1:e,0),function(){for(var o=arguments,r=-1,i=$t(o.length-e,0),a=Array(i);++r<i;)a[r]=o[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=o[r];return s[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,e,kt),t+"")}var Zt,qt,Jt,te,ee,ne,oe,re,ie,ae,se,Ee,_e,ce,ue=(Zt=function(t,e,n){Vt(t,e,n)},Xt((function(e,n){var o=-1,r=n.length,i=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(i=Zt.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,n,o){if(!N(o))return!1;var r=typeof n;return!!("number"==r?lt(o)&&Wt(n,o.length):"string"==r&&n in o)&&t(o[n],e)}(n[0],n[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++o<r;){var s=n[o];s&&Zt(e,s,o,i)}return e})));!function(t){t.LAUNCHER="launcher",t.MAIN_WINDOW="mainWindow",t.TOUR="tour"}(qt||(qt={})),function(t){t.NARROW="narrow",t.STANDARD="standard",t.WIDE="wide"}(Jt||(Jt={})),function(t){t.FAILED="FAILED",t.NO_SKILL="NO_SKILL",t.THROTTLED="THROTTLED",t.AGENT_APP_EXPIRED_SESSION="AGENT_APP_EXPIRED_SESSION"}(te||(te={})),function(t){t[t.CLOSED=1]="CLOSED",t[t.OPEN_STRIKE=2]="OPEN_STRIKE",t[t.OPEN_FULL=3]="OPEN_FULL"}(ee||(ee={})),function(t){t[t.ALTERNATE_RESPONSES=1]="ALTERNATE_RESPONSES",t[t.CONTACT_OPTIONS=2]="CONTACT_OPTIONS",t[t.STARTERS=3]="STARTERS"}(ne||(ne={})),function(t){t.INITIAL_CONFIG="INITIAL_CONFIG",t.OPEN_CONFIG="OPEN_CONFIG",t.MESSAGE_COMMUNICATION="MESSAGE_COMMUNICATION",t.RENDER="RENDER",t.IDENTITY_TOKEN="IDENTITY_TOKEN",t.MCSP_IDENTITY_TOKEN="MCSP_IDENTITY_TOKEN",t.INTEGRATION_ERROR="INTEGRATION_ERROR",t.AGENT_APP_EXPIRED_SESSION="AGENT_APP_EXPIRED_SESSION",t.HYDRATION="HYDRATION",t.PREVIEW_LINK_SECURITY="PREVIEW_LINK_SECURITY"}(oe||(oe={})),function(t){t.DESKTOP="desktop",t.MOBILE="mobile"}(re||(re={})),function(t){t.DESKTOP="desktop",t.MOBILE="mobile"}(ie||(ie={})),function(t){t.WEB_CHAT_SETTINGS="web-chat-settings",t.ASSISTANT_PREVIEW="assistant-preview",t.PREVIEW_LINK="preview-link",t.ACTIONS="actions",t.SEARCH="search",t.ANALYTICS="analytics"}(ae||(ae={})),function(t){t.ERROR_MISSING="error",t.WARN_MISSING="warning",t.PREVIEW="preview"}(se||(se={})),function(t){t.CLOSE="close",t.MINIMIZE="minimize",t.SIDE_PANEL_LEFT="side-panel-left",t.SIDE_PANEL_RIGHT="side-panel-right"}(Ee||(Ee={})),function(t){t.LEFT="left",t.RIGHT="right"}(_e||(_e={})),function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.EARLY_HINTS=103]="EARLY_HINTS",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",t[t.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.IM_A_TEAPOT=418]="IM_A_TEAPOT",t[t.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",t[t.METHOD_FAILURE=420]="METHOD_FAILURE",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"}(ce||(ce={}));var Te="8.3.1",Oe="https://web-chat.global.assistant.watson.appdomain.cloud";async function le(t){await new Promise((e=>{setTimeout(e,t)}))}const Re="[watsonx Assistant Chat]";var de,Ne,Ie,Se,Ae,pe,fe,Ce,he,De,ge;function Le(t,...e){console.error(`${Re} ${t}`,...e)}function we(t,...e){console.debug(`${Re} ${t}`,...e)}function Ue(t,...e){console.warn(`${Re} ${t}`,...e)}async function me(t){try{if(t)return await t.text()}catch(t){Le("Error getting fetch text",t)}}async function ye(t){try{if(t)return function(t,e,n){const o=new Promise(((t,o)=>{setTimeout((()=>{o(n)}),e)}));return Promise.race([t,o])}(t.text(),2e3,"Getting response text")}catch(t){Le("Error getting fetch text",t)}}function ve(){window.watsonAssistantChatSharedConfig=window.watsonAssistantChatSharedConfig||{},window.watsonAssistantChatSharedConfig.namespaces=window.watsonAssistantChatSharedConfig.namespaces||[],window.watsonAssistantChatSharedConfig.loadScriptPromises=window.watsonAssistantChatSharedConfig.loadScriptPromises||{}}function Pe(){return window.watsonAssistantChatSharedConfig}function be(t){return t?t.trim():""}function Me(t,e){ve();const n=be(t);if(Pe().namespaces.includes(n)){Le(`You have multiple web chats attempting to use the same namespace. (${n||"No namespace provided"})`)}else!function(t){ve();const e=be(t),{namespaces:n}=Pe();n.push(e)}(t)}!function(t){t.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT="aiTooltipAfterDescriptionElement",t.WELCOME_NODE_BEFORE_ELEMENT="welcomeNodeBeforeElement",t.HEADER_BOTTOM_ELEMENT="headerBottomElement",t.BEFORE_INPUT_ELEMENT="beforeInputElement",t.HOME_SCREEN_BEFORE_INPUT_ELEMENT="homeScreenBeforeInputElement",t.HOME_SCREEN_AFTER_STARTERS_ELEMENT="homeScreenAfterStartersElement",t.HOME_SCREEN_HEADER_BOTTOM_ELEMENT="homeScreenHeaderBottomElement"}(de||(de={})),function(t){t.SALES_FORCE="salesforceweb",t.ZENDESK="zendeskweb",t.NICE_DFO="nicedfo",t.GENESYS_MESSENGER="genesyswebmessenger"}(Ne||(Ne={})),function(t){t.COMPLETE="complete",t.EDIT="edit",t.UPLOADING="uploading",t.SUCCESS="success"}(Ie||(Ie={})),function(t){t.PRIMARY="primary",t.ACCENT="accent"}(Se||(Se={})),function(t){t.ROUND="round",t.SQUARE="square"}(Ae||(Ae={})),function(t){t.WHITE="white",t.G10="g10",t.G90="g90",t.G100="g100"}(pe||(pe={})),function(t){t.WHITE="cds--white",t.G10="cds--g10",t.G90="cds--g90",t.G100="cds--g100"}(fe||(fe={})),function(t){t.PRIMARY="primary",t.SECONDARY="secondary",t.DANGER="danger",t.GHOST="ghost",t.DANGER_PRIMARY="danger--primary",t.DANGER_GHOST="danger--ghost",t.DANGER_TERTIARY="danger--tertiary",t.TERTIARY="tertiary"}(Ce||(Ce={})),function(t){t.SMALL="sm",t.MEDIUM="md",t.LARGE="lg",t.XLARGE="xl",t.XXLARGE="2xl"}(he||(he={})),function(t){t.START="start",t.CENTER="center",t.END="end"}(De||(De={})),function(t){t.TEXT_NOTIFICATION="text_notification"}(ge||(ge={}));function Ge(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((e=>{!Object.prototype.hasOwnProperty.call(t,e)||null===t[e]||"object"!=typeof t[e]&&"function"!=typeof t[e]||Object.isFrozen(t[e])||Ge(t[e])})),t}function We(t){ve();const e=t.clientVersion||Te,{requestedVersion:n}=Pe();if(n){if(n!==e)return!0}else!function(t){window.watsonAssistantChatSharedConfig.requestedVersion=t}(e);return!1}const He={config:{mobile:{title:"",time_to_expand:15e3,new_expand_time:!1,time_to_reduce:1e4,notification_type:ge.TEXT_NOTIFICATION},desktop:{title:"",new_expand_time:!1,time_to_expand:15e3,notification_type:ge.TEXT_NOTIFICATION}}};Ge(He);const Fe={title:null,hideBackButton:!1,hidePanelHeader:!1,disableAnimation:!1};Ge(Fe);Ge({isOpen:!1,panelID:"wac-default-panel",options:Fe});Ge({isOpen:!1,messageItem:null});Ge({isOpen:!1,citationItem:null,relatedSearchResult:null});const je={config:{is_on:!1},isOpen:!1,showBanner:!0};Ge(je);Ge({activeTourStepItems:null});Ge({isOpen:!1,localMessageItem:null,isMessageForInput:!1});const Be={showButton:!1,allowCollapse:!1,panelState:ee.CLOSED,config:{is_on:!1},contactItem:null,starters:null,suggestionListItems:null,showSearchSection:!1,searchResults:null,searchResultsLoading:!1,searchResultsText:null};Ge(Be);const Ye={launcher:!1,mainWindow:!1,tour:!1};Ge(Ye);Ge({launcher:!0,mainWindow:!1,tour:!1});Ge({mainWindow:!0,launcher:!1,tour:!1});Ge({tour:!0,mainWindow:!1,launcher:!1});Ge({chatState:{version:Te,sessionID:null,sessionStartedTimestamp:null,updateHistoryUserDefinedCount:{},disclaimersAccepted:{},homeScreenState:{isHomeScreenOpen:!1,showBackToBot:!1},hasSentNonWelcomeMessage:!1,suggestionsPersistedState:{numStrikes:0,selectedIndex:-1,selectedSection:null},persistedTourState:{activeTourID:null,activeTourCurrentStepIndex:null},agentState:{isConnected:!1,agentProfiles:{}}},launcherState:{wasLoadedFromBrowser:!1,version:Te,viewState:Ye,activeTour:!1,showUnreadIndicator:!1,mobileLauncherIsExtended:!1,mobileLauncherWasReduced:!1,mobileLauncherDisableBounce:!1,desktopLauncherIsExpanded:!1,desktopLauncherWasMinimized:!1,bounceTurn:1,hasSentNonWelcomeMessage:!1}});const xe={localMessageIDs:[],messageIDs:[],isTypingCounter:0,isLoadingCounter:0,isScrollAnchored:!1};Ge(xe);Ge({allMessageItemsByID:{},allMessagesByID:{},botMessageState:{...xe}});Ge({isConnecting:!1,isReconnecting:!1,numUnreadMessages:0,fileUploadInProgress:!1,showScreenShareRequest:!1,isScreenSharing:!1,serviceDeskCapabilities:{allowFileUploads:!1,allowedFileUploadTypes:null,allowMultipleFileUploads:!1}});Ge({carbonTheme:pe.G10,useAITheme:!1,corners:Ae.ROUND});Ge({carbon_theme:pe.G10,use_ai_theme:!1});Ge({enabled:!1});Ge({is_on:!1});var Ve;Ge({showFrame:!0,hasContentMaxWidth:!1}),function(t){t.NONE="none",t.SOLID="solid",t.TOP_CORNER_OUT="top_corner_out",t.BOTTOM_UP="bottom_up"}(Ve||(Ve={}));var ke,$e,Ke,Qe,ze,Xe,Ze,qe;!function(t){t.CLOSE_PANEL_BUTTON_TOGGLED="closePanelButton:toggled",t.PRE_RECEIVE="pre:receive",t.RECEIVE="receive",t.PRE_SEND="pre:send",t.SEND="send",t.WINDOW_PRE_OPEN="window:pre:open",t.WINDOW_OPEN="window:open",t.WINDOW_PRE_CLOSE="window:pre:close",t.WINDOW_CLOSE="window:close",t.VIEW_PRE_CHANGE="view:pre:change",t.VIEW_CHANGE="view:change",t.MESSAGE_ITEM_CUSTOM="messageItemCustom",t.CUSTOM_RESPONSE="customResponse",t.USER_DEFINED_RESPONSE="userDefinedResponse",t.PROCESS_OPEN="process:open",t.PROCESS_CLOSE="process:close",t.PROCESS_CANCEL="process:cancel",t.HISTORY_BEGIN="history:begin",t.HISTORY_END="history:end",t.IDENTITY_EXPIRED="identityTokenExpired",t.PRE_RESTART_CONVERSATION="pre:restartConversation",t.RESTART_CONVERSATION="restartConversation",t.CHAT_READY="chat:ready",t.CUSTOMIZATION_RESPONSE_LEFT="customization:message:response:item:left",t.CUSTOMIZATION_REQUEST_LEFT="customization:message:request:item:left",t.CUSTOM_PANEL_PRE_OPEN="customPanel:pre:open",t.CUSTOM_PANEL_OPEN="customPanel:open",t.CUSTOM_PANEL_PRE_CLOSE="customPanel:pre:close",t.CUSTOM_PANEL_CLOSE="customPanel:close",t.SESSION_EXPIRED="sessionExpired",t.TOUR_START="tour:start",t.TOUR_END="tour:end",t.TOUR_STEP="tour:step",t.AGENT_PRE_RECEIVE="agent:pre:receive",t.AGENT_RECEIVE="agent:receive",t.AGENT_PRE_SEND="agent:pre:send",t.AGENT_SEND="agent:send",t.AGENT_PRE_START_CHAT="agent:pre:startChat",t.AGENT_PRE_END_CHAT="agent:pre:endChat",t.AGENT_END_CHAT="agent:endChat",t.AGENT_ARE_ANY_AGENTS_ONLINE="agent:areAnyAgentsOnline",t.AGENT_PRE_SESSION_HISTORY="agent:pre:sessionHistory",t.GENESYS_MESSENGER_AUTH_PROVIDER="agent:genesysMessenger:AuthProvider",t.GENESYS_MESSENGER_GET_AUTH_CODE="agent:genesysMessenger:getAuthCode",t.GENESYS_MESSENGER_REAUTHENTICATE="agent:genesysMessenger:reAuthenticate",t.GENESYS_MESSENGER_LOGGED_OUT="agent:genesysMessenger:loggedOut",t.GENESYS_MESSENGER_AUTH_ERROR="agent:genesysMessenger:authError",t.NICE_DFO_GET_AUTH_CODE="agent:niceDFO:getAuthCode",t.CHUNK_USER_DEFINED_RESPONSE="chunk:userDefinedResponse",t.ALL_EVENTS="*"}(ke||(ke={})),function(t){t.DEFAULT_LAUNCHER="default_launcher",t.OPEN_BY_DEFAULT="open_by_default",t.SESSION_HISTORY="session_history",t.CALLED_OPEN_WINDOW="called_open_window",t.LINK="link",t.FROM_TOUR="from_tour",t.TOUR_OPENED_OTHER_VIEW="tour_opened_other_view",t.CALLED_RESTART_CONVERSATION="called_restart_conversation",t.CHANNEL_TRANSFER="channel_transfer"}($e||($e={})),function(t){t.DEFAULT_MINIMIZE="default_minimize",t.CALLED_CLOSE_WINDOW="called_close_window",t.OPEN_TOUR="open_tour",t.TOUR_CARD_STARTED_TOUR="tour_card_started_tour",t.TOUR_CARD_RESUMED_TOUR="tour_card_resumed_tour",t.TOUR_CARD_RESTARTED_TOUR="tour_card_restarted_tour",t.CALLED_START_TOUR="called_start_tour",t.TOUR_SKIP_CARD="tour_skip_card",t.MAIN_WINDOW_CLOSED_AND_RESTARTED="main_window_closed_and_restarted"}(Ke||(Ke={})),function(t){t.WEB_CHAT_LOADED="webChatLoaded",t.LAUNCHER_CLICKED="launcherClicked",t.SESSION_HISTORY="sessionHistory",t.CALLED_OPEN_WINDOW="calledOpenWindow",t.LINK_ID="linkID",t.TOUR_OPENED_OTHER_VIEW="tourOpenedOtherView",t.CALLED_RESTART_CONVERSATION="calledRestartConversation",t.CHANNEL_TRANSFER="channelTransfer",t.MAIN_WINDOW_MINIMIZED="mainWindowMinimized",t.CALLED_CLOSE_WINDOW="calledCloseWindow",t.TOUR_CARD_STARTED_TOUR="tourCardStartedTour",t.TOUR_CARD_RESUMED_TOUR="tourCardResumedTour",t.TOUR_CARD_RESTARTED_TOUR="tourCardRestartedTour",t.CALLED_START_TOUR="calledStartTour",t.TOUR_SKIP_CARD="tourSkipCard",t.MAIN_WINDOW_CLOSED_AND_RESTARTED="mainWindowClosedAndRestarted",t.TOUR_MINIMIZED="tourMinimized",t.TOUR_CLOSED="tourClosed",t.TOUR_DONE="tourDone",t.CALLED_CHANGE_VIEW="calledChangeView",t.CALLED_END_TOUR="calledEndTour"}(Qe||(Qe={})),function(t){t.MESSAGE_INPUT="messageInput",t.HOME_SCREEN_INPUT="homeScreenInput",t.OPTION_BUTTON="optionButton",t.OPTION_DROP_DOWN="optionDropDown",t.SKIP_USER_INPUT="skipUserInput",t.HYDRATE_RESEND="hydrateResend",t.HISTORY_UPDATE="historyUpdate",t.INSTANCE_SEND="instanceSend",t.DATE_PICKER="datePicker",t.POST_BACK_BUTTON="postBackButton",t.LINK_ID="linkID",t.HOME_SCREEN_STARTER="homeScreenStarter",t.DISAMBIGUATION="disambiguation",t.START_TOUR_METHOD="startTourMethod",t.WELCOME_REQUEST="welcomeRequest",t.EVENT="event",t.OTHER="other",t.SUGGESTIONS_MESSAGE="suggestionsMessage",t.SUGGESTIONS_STARTER="suggestionsStarter",t.SUGGESTIONS_CONTACT="suggestionsContact",t.SUGGESTIONS_3RD_STRIKE="suggestions3rdStrike"}(ze||(ze={})),new Map([[$e.CALLED_OPEN_WINDOW,Qe.CALLED_OPEN_WINDOW],[$e.DEFAULT_LAUNCHER,Qe.LAUNCHER_CLICKED],[$e.LINK,Qe.LINK_ID],[$e.OPEN_BY_DEFAULT,Qe.WEB_CHAT_LOADED],[$e.SESSION_HISTORY,Qe.SESSION_HISTORY],[$e.TOUR_OPENED_OTHER_VIEW,Qe.TOUR_OPENED_OTHER_VIEW],[$e.CALLED_RESTART_CONVERSATION,Qe.CALLED_RESTART_CONVERSATION],[$e.CHANNEL_TRANSFER,Qe.CHANNEL_TRANSFER]]),new Map([[Ke.CALLED_CLOSE_WINDOW,Qe.CALLED_CLOSE_WINDOW],[Ke.DEFAULT_MINIMIZE,Qe.MAIN_WINDOW_MINIMIZED],[Ke.TOUR_CARD_STARTED_TOUR,Qe.TOUR_CARD_STARTED_TOUR],[Ke.TOUR_CARD_RESUMED_TOUR,Qe.TOUR_CARD_RESUMED_TOUR],[Ke.TOUR_CARD_RESTARTED_TOUR,Qe.TOUR_CARD_RESTARTED_TOUR],[Ke.CALLED_START_TOUR,Qe.CALLED_START_TOUR],[Ke.TOUR_SKIP_CARD,Qe.TOUR_SKIP_CARD],[Ke.MAIN_WINDOW_CLOSED_AND_RESTARTED,Qe.MAIN_WINDOW_CLOSED_AND_RESTARTED]]),function(t){t.START_TOUR_METHOD="start_tour_method",t.SKIP_CARD="skip_card",t.START_TOUR_CLICKED="start_tour_clicked"}(Xe||(Xe={})),function(t){t.DONE_CLICKED="done_clicked"}(Ze||(Ze={})),function(t){t.BUTTON_ITEM_CLICKED="buttonItemClicked"}(qe||(qe={}));class Je extends Error{}Je.prototype.name="InvalidTokenError";const tn="token provided is malformed",en="Authorization header provided but does not follow JWT format",nn="token expired";var on;!function(t){t[t.MISCELLANEOUS=1]="MISCELLANEOUS",t[t.LOCAL_MESSAGE=2]="LOCAL_MESSAGE",t[t.MESSAGE=3]="MESSAGE",t[t.USER=6]="USER",t[t.DEVICE_ID=8]="DEVICE_ID",t[t.FILE=9]="FILE"}(on||(on={}));const rn={dev:"integrations.us-south.assistant.dev.watson.appdomain.cloud",staging:"integrations.us-south.assistant.test.watson.appdomain.cloud","us-south":"integrations.us-south.assistant.watson.appdomain.cloud","us-east":"integrations.us-east.assistant.watson.appdomain.cloud","jp-tok":"integrations.jp-tok.assistant.watson.appdomain.cloud","au-syd":"integrations.au-syd.assistant.watson.appdomain.cloud","eu-gb":"integrations.eu-gb.assistant.watson.appdomain.cloud","eu-de":"integrations.eu-de.assistant.watson.appdomain.cloud","kr-seo":"integrations.kr-seo.assistant.watson.appdomain.cloud","aws-dev":"integrations.aws-us-east-1.assistant.dev.watson.appdomain.cloud","aws-staging":"integrations.aws-us-east-1.assistant.test.watson.appdomain.cloud","aws-us-east-1":"integrations.aws-us-east-1.assistant.watson.appdomain.cloud","aws-preprod":"integrations.aws-us-east-1.assistant.preprod.watson.appdomain.cloud","aws-eu-central-1":"integrations.aws-eu-central-1.assistant.watson.appdomain.cloud","wxo-dev":"integrations.us-south.assistant-builder.dev.watson.appdomain.cloud","wxo-staging":"integrations.us-south.assistant-builder.test.watson.appdomain.cloud","wxo-us-south":"integrations.us-south.assistant-builder.watson.appdomain.cloud"};const an={openChatByDefault:!1,showLauncher:!0,shouldTakeFocusIfOpensAutomatically:!0,agentAppConfig:{is_on:!1},servers:{},serviceDesk:{},messaging:{copyPreviousContextOnRequest:!0},__ibm__:{isTrackingEnabled:!0,logTrackObjects:!1,connectToAgentBehavior:se.ERROR_MISSING,enableFeatures:{}},wxo:{}},sn="chat";function En(t){const e=function(t){return rn[t.region]}(t);return`${t.servers?.assistantURLPrefix||`https://${e}`}/${t.subscriptionID||"public"}`}function _n(t,e){const n=t.__ibm__?.customInitConfigURL;if(n)return n;const o=function(t,e){let n=null;if(t.cloudPrivateHostURL){const e=sn;n=`${t.cloudPrivateHostURL.replace(/\/?$/,"/")}v1/${e}/${t.integrationID}`}return n}(t);if(o)return`${o}/config?type=init`;const r=En(t),i="?type=init";return t.agentAppConfig?.is_on?`${r}/agentapp/${t.integrationID}/config${i}`:`${r}/chat/${t.integrationID}/config${i}`}async function cn(t,e,n,o){const r=await e(t,o);if(!r.ok){if(r.status===ce.TOO_MANY_REQUESTS)return null;const t=await me(r);if(function(t,e,n){return t===ce.FORBIDDEN&&e||t===ce.BAD_REQUEST&&n?.includes(tn)||t===ce.BAD_REQUEST&&n?.includes(en)||t===ce.UNAUTHORIZED&&n?.includes(nn)}(r.status,n,t))return r;throw r}return r}async function un(t,e,n){if(t.servers?.skipConfig)return{botName:"watsonx Assistant"};const o=_n(t);let r;try{r=await async function(t,e,n){let o=1;for(;o-1<=e.length;){try{return await t(o)}catch(t){if(o-1===e.length)throw Le(`The operation "${n}" failed after ${o} attempts and will not be retried.`,t),t;{const r=e[o-1];Le(`The operation "${n}" failed after ${o} attempts will be retried in ${r}ms.`,t),await le(r)}}o++}throw new Error(`Unexpected retry state for operation "${n}".`)}((()=>cn(o,n,!1,undefined)),[100,1e3,2e3,5e3],"fetch init config")}catch(t){if(e)throw e({errorType:oe.INITIAL_CONFIG,message:"The init configuration data could not be loaded.",errorCode:t?.status||void 0,otherData:await ye(t)}),new Error(`${Re} The init configuration data could not be loaded.`)}if(!r)throw new Error(`${Re} The init configuration data could not be loaded.`);const i=await me(r);if(!r.ok){const n=`The configuration for integrationID "${t.integrationID}" requires a valid identityToken. The chat widget will not be displayed.`;throw e&&e({errorType:oe.INITIAL_CONFIG,message:"The init configuration data could not be loaded (JWT retry).",errorCode:r.status||void 0,otherData:i}),Le(n),new Error(`${Re}  ${n}`)}const a=i?JSON.parse(i):{};if(a.botName=a.botName||"watsonx Assistant",t.__ibm__?.toolingType===ae.PREVIEW_LINK&&a.authorization?.is_on)throw e&&e({errorType:oe.PREVIEW_LINK_SECURITY,message:"Web chat security is enabled which is not supported by the preview link."}),new Error(`${Re} Web chat security is enabled which is not supported by the preview link.`);return a}function Tn(){return t=window.fetch.bind(window),async(...e)=>{const n=await t(...e),o=n.text.bind(n);let r=On;return n.text=async()=>(r===On&&(r=await o()),r),n.json=async()=>{const t=await n.text();return JSON.parse(t)},n};var t}const On={};let ln;function Rn(t){try{if(t){const e=window.sessionStorage?.getItem("IBM_WAC_CONFIG_OVERRIDE");if(e){const n=JSON.parse(e);Ue("Applying local config override",n),ue(t,n)}}}catch(t){Le("Error trying to apply session overrides",t)}}async function dn(t){Rn(t),t?.debug&&we("[WatsonAssistantChatEntry] Called loadWatsonAssistantChat()",t);return In(await Nn(t,Tn(),ln))}async function Nn(t,e,n,o){const r=Date.now();t?.debug&&we("[ChatEntry] Called instantiateWidget",t),"https:"!==document.location.protocol&&Ue('Your page is not running with "https"; your data will not be sent  securely.'),function(t,e){const{integrationID:n,region:o,namespace:r,__ibm__:i=an.__ibm__,messaging:a}=t;if(!i.customMessageURL&&!a?.customSendMessage){if("string"!=typeof(s=n)||null===s.match(/^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i))throw new Error(`${Re} The value of integrationID "${n}" is not a valid ID.`);if(!o)throw new Error(`${Re} You failed to provide a region in your config object.`);if(!rn[o])throw new Error(`${Re} The region "${o}" you provided in your config object is not a valid region.`)}if(We(t))throw new Error(`${Re} You cannot load web chats of different versions on the same page.`);var s;Me(r)}(t);const{element:i,onLoad:a,onError:s,...E}=t;E.__ibm__?.skipConfig&&(Ue("IBM skipConfig is deprecated. Use servers.skipConfig."),E.servers=E.servers||{},E.servers.skipConfig=!0),E.__ibm__?.overrideRemoteInitConfig&&(Ue("IBM overrideRemoteInitConfig is deprecated. Use servers.initConfig."),E.servers=E.servers||{},E.servers.initConfig=E.__ibm__.overrideRemoteInitConfig);const[_,c]=await Promise.all([un(E,s,e),n(E)]);return new c(E,_,i,{loadVersion:"CarbonChatEntry",onError:s,fetch:e,loadStartTime:r,asCarbonChat:o})}function In(t){return new Promise(((e,n)=>{const o=function(){t.start().then(e,n)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}))}!function(t){ln=t;const e=window.watsonAssistantChatOptions;Rn(e);const n=e?.debug;n&&we("[WatsonAssistantChatEntry] Starting."),e?e.onLoad?(n&&we("[WatsonAssistantChatEntry] Using publicConfig.onLoad."),function(){const t=window.watsonAssistantChatOptions;t?.debug&&we("[WatsonAssistantChatEntry] Called loadWatsonAssistantChatWithOnLoad",t);const e=t.onLoad;Nn(t,Tn(),ln).then((t=>In(t))).then(e)}()):n&&Ue("[WatsonAssistantChatEntry] No onLoad found in public config."):n&&we("[WatsonAssistantChatEntry] No window.watsonAssistantChatOptions found."),window.loadWatsonAssistantChat=dn}((async function(t){const e=function(t){return t.__ibm__?.useExactVersion?t.clientVersion:Te}(t),{loadScriptPromises:n}=Pe();return n[Te]?n[Te]:(n[Te]=function(){let t,e;const n=new Promise(((n,o)=>{t=n,e=o}));return n.doResolve=e=>{n.isResolved=!0,n.isComplete=!0,t(e)},n.doReject=t=>{n.isRejected=!0,n.isComplete=!0,e(t)},n.isResolved=!1,n.isRejected=!1,n.isComplete=!1,n}(),new Promise(((o,r)=>{const i=function(t){return t?.cloudPrivateHostURL?`${t.cloudPrivateHostURL.replace(/\/?$/,"/")}static/webchat`:t?.servers?.webChatScriptPrefix?t?.servers?.webChatScriptPrefix:Oe}(t),a=`${i}/versions/${e}`,s=document.createElement("script");s.onload=async()=>{const t=await n[Te];o(t)},s.onerror=t=>{r(t)},s.src=`${a}/chat.js`,document.head.appendChild(s)})))}))}();
//# sourceMappingURL=WatsonAssistantChatEntry.js.map
